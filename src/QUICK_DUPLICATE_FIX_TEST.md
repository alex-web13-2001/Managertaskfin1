# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∑–∞–¥–∞—á

## –ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é –º—ã —Ä–µ—à–∏–ª–∏

–î–µ–º–æ-–∑–∞–¥–∞—á–∏ "–≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å" –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–æ–ª–±–µ—Ü –ø–æ—Å–ª–µ drag-and-drop, –∞ –∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ **demo-data.tsx** - —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–µ–º–æ-–∑–∞–¥–∞—á
2. ‚úÖ **Endpoint –¥–ª—è –æ—á–∏—Å—Ç–∫–∏** - `POST /tasks/cleanup-duplicates`  
3. ‚úÖ **UI –∫–Ω–æ–ø–∫–∞** - –≤ —Ä–∞–∑–¥–µ–ª–µ –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ü—Ä–æ—Ñ–∏–ª—å** (–∏–∫–æ–Ω–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ –∫–∞—Ä—Ç–æ—á–∫–∏ **"–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"**
4. –ù–∞–∂–º–∏—Ç–µ **"–û—á–∏—Å—Ç–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∑–∞–¥–∞—á"**
5. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É DnD

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–î–∞—à–±–æ—Ä–¥** –∏–ª–∏ **–õ–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏**
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —Ä–µ–∂–∏–º **Kanban**
3. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ª—é–±—É—é –¥–µ–º–æ-–∑–∞–¥–∞—á—É –≤ –¥—Ä—É–≥–æ–π —Å—Ç–æ–ª–±–µ—Ü
4. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 3-5 —Å–µ–∫—É–Ω–¥** (polling –æ–±–Ω–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ)
5. ‚úÖ –ó–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ **–æ—Å—Ç–∞—Ç—å—Å—è** –≤ –Ω–æ–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ
6. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
7. ‚úÖ –ó–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ **–æ—Å—Ç–∞—Ç—å—Å—è** –≤ –Ω–æ–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ –ª—é–±–æ–º –ø—Ä–æ–µ–∫—Ç–µ
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –µ—ë –º–µ–∂–¥—É —Å—Ç–æ–ª–±—Ü–∞–º–∏
3. ‚úÖ –î–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```
üßπ Starting duplicate cleanup for user...
üìÅ Project "–í–∞—à –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç": found X duplicates
‚úÖ Deleted duplicate: task:user:...
‚úÖ Cleanup complete: removed X duplicate tasks
```

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –î–æ –æ—á–∏—Å—Ç–∫–∏ (—Å–æ —Å—Ç–∞—Ä—ã–º–∏ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏):
- –î–µ–º–æ-–∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç "–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è" –ø–æ—Å–ª–µ DnD
- –ù–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### ‚úÖ –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:
- **–í–°–ï** –∑–∞–¥–∞—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- DnD —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –ó–∞–¥–∞—á–∏ –Ω–µ "–æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è" –ø–æ—Å–ª–µ polling
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–≤–æ–∏—Ö –º–µ—Å—Ç–∞—Ö

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞–¥–∞—á:

```
‚úÖ –ó–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –±–∞–∑—ã: X
üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á:
  –ª–∏—á–Ω—ã–µ: Y
  –ø—Ä–æ–µ–∫—Ç–Ω—ã–µ: Z
‚ö†Ô∏è Removed N duplicate tasks  ‚Üê –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ DnD:

```
üîÑ Updating task {taskId} with key: task:project:{projectId}:{taskId}
‚úÖ Task updated successfully
```

–ö–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
- `task:project:...` –¥–ª—è –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö –∑–∞–¥–∞—á
- `task:user:...` –¥–ª—è –ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –µ—â—ë —Ä–∞–∑
5. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π –∫–æ–¥–∞

## –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ï—Å–ª–∏ –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ—Å—å –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - **–≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞**, –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –æ —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á–∞—Ö:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
fetch('https://{projectId}.supabase.co/functions/v1/make-server-d9879966/tasks/cleanup-duplicates', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('access_token')}`,
  }
}).then(r => r.json()).then(console.log)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏
- –î–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ–µ–∫—Ç—É
