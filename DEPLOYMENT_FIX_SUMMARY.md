# üéØ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Nginx

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

**–î–∞—Ç–∞:** 10 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** Nginx –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/*` —Ä–æ—É—Ç–∞–º  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏–º–ø—Ç–æ–º—ã
```
‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- Backend –∑–∞–ø—É—â–µ–Ω –∏ —Å—Ç–∞–±–∏–ª–µ–Ω (PM2: online, –ø–æ—Ä—Ç 3001)
- –ü—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ backend —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç–ª–∏—á–Ω–æ
- Frontend –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- Nginx –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ /api/auth/* —Ä–æ—É—Ç–∞–º
- Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: POST /api/auth/signin
- Backend –ø–æ–ª—É—á–∞–µ—Ç: POST /auth/signin (–ë–ï–ó /api)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: 404 "Cannot POST /auth/signin"
```

### –ü–æ–ø—ã—Ç–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏)
–ë—ã–ª–æ –∏—Å–ø—Ä–æ–±–æ–≤–∞–Ω–æ 6 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Nginx:
1. ‚ùå `location /api` + `proxy_pass http://127.0.0.1:3001`
2. ‚ùå `location /api/` + `proxy_pass http://127.0.0.1:3001/`
3. ‚ùå `location /api/` + `proxy_pass http://127.0.0.1:3001/api/`
4. ‚ùå `location ~ ^/api` + `proxy_pass http://127.0.0.1:3001`
5. ‚ùå `location ~ ^/api` + `proxy_pass http://127.0.0.1:3001$request_uri`
6. ‚ùå `location /api` + `rewrite ^/api(.*)$ /api$1 break` + `proxy_pass`

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
```nginx
location /api/ {
    proxy_pass http://127.0.0.1:3001/api/;
    ...
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —ç—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –î–û–õ–ñ–ù–ê —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Nginx, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ backend –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ `/api` –ø—Ä–µ—Ñ–∏–∫—Å–∞.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

```nginx
location /api/ {
    proxy_pass http://127.0.0.1:3001;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
1. **`proxy_pass http://127.0.0.1:3001;`** - –ë–ï–ó –ø—É—Ç–∏ –ø–æ—Å–ª–µ –ø–æ—Ä—Ç–∞
2. –ö–æ–≥–¥–∞ `proxy_pass` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç URI (–Ω–µ—Ç –ø—É—Ç–∏ –ø–æ—Å–ª–µ –ø–æ—Ä—Ç–∞), Nginx –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å
3. –ó–∞–ø—Ä–æ—Å `/api/auth/signin` –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `/api/auth/signin` ‚úÖ

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∞–≤–∏–ª–æ Nginx:**
- `proxy_pass` –ë–ï–ó URI ‚Üí –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–µ—Å—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å
- `proxy_pass` –° URI ‚Üí —Å–æ–≤–ø–∞–≤—à–∞—è —á–∞—Å—Ç—å location –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URI

**–ü—Ä–∏–º–µ—Ä:**
```nginx
# –í–∞—Ä–∏–∞–Ω—Ç 1 (–ü–†–ê–í–ò–õ–¨–ù–û):
location /api/ {
    proxy_pass http://backend;  # ‚Üê –ù–µ—Ç –ø—É—Ç–∏
}
# /api/auth/signin ‚Üí http://backend/api/auth/signin ‚úÖ

# –í–∞—Ä–∏–∞–Ω—Ç 2 (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
location /api/ {
    proxy_pass http://backend/;  # ‚Üê –ï—Å—Ç—å –ø—É—Ç—å "/"
}
# /api/auth/signin ‚Üí http://backend/auth/signin ‚ùå
```

---

## üõ†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

### 1. –î–æ–±–∞–≤–ª–µ–Ω `/api/health` endpoint
**–§–∞–π–ª:** `src/server/index.ts`

```typescript
// Health check endpoint (both /health and /api/health for compatibility)
const healthHandler = (_req: Request, res: Response) => {
  res.json({ status: 'ok', timestamp: new Date().toISOString() });
};

app.get('/health', healthHandler);
app.get('/api/health', healthHandler);
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ Nginx –∏ —É–ø—Ä–æ—â–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É.

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–§–∞–π–ª:** `PRODUCTION_DEPLOYMENT.md`

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–ª–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `proxy_pass`.

### 3. –°–æ–∑–¥–∞–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
**–§–∞–π–ª:** `NGINX_FIX_GUIDE_RU.md` (501 —Å—Ç—Ä–æ–∫–∞)

–í–∫–ª—é—á–∞–µ—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏
- üîç –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã
- üöÄ –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- üìù –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª Nginx proxy_pass
- ‚ùì FAQ —Å —á–∞—Å—Ç—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- üéâ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

### 4. –°–æ–∑–¥–∞–Ω –±—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
**–§–∞–π–ª:** `QUICK_NGINX_FIX.md** (224 —Å—Ç—Ä–æ–∫–∏)

–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:
- ‚ö° TL;DR —Å 3 –∫–æ–º–∞–Ω–¥–∞–º–∏
- üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 5. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
**–§–∞–π–ª:** `verify-deployment.sh` (261 —Å—Ç—Ä–æ–∫–∞)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
```bash
./verify-deployment.sh
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ Backend health check (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
- ‚úÖ Backend /api/auth/signin (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
- ‚úÖ Nginx proxy –∫ /api/health
- ‚úÖ Nginx proxy –∫ /api/auth/signin
- ‚úÖ PM2 –ø—Ä–æ—Ü–µ—Å—Å —Å—Ç–∞—Ç—É—Å
- ‚úÖ –ü–æ—Ä—Ç 3001 –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞

**–í—ã–≤–æ–¥:**
```
üîç Verifying deployment for https://kanban.24task.ru
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ PASS: Backend health check responds with 200 OK
‚úÖ PASS: Backend /api/auth/signin endpoint exists
‚úÖ PASS: Nginx proxy to /api/health works correctly
‚úÖ PASS: Nginx proxy to /api/auth/signin works correctly
‚úÖ PASS: PM2 process is online
‚úÖ PASS: Port 3001 is listening
‚úÖ PASS: Nginx configuration syntax is valid

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä SUMMARY
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ Tests Passed: 7
‚ùå Tests Failed: 0

üéâ All tests passed! Deployment is working correctly.
```

---

## üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (3 –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
sudo nano /etc/nginx/sites-available/taskmanager

# 2. –ù–∞–π–¥–∏—Ç–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:
#    –ë–´–õ–û: proxy_pass http://127.0.0.1:3001/api/;
#    –°–¢–ê–õ–û: proxy_pass http://127.0.0.1:3001;

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ
sudo nginx -t && sudo systemctl reload nginx
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# –ú–µ—Ç–æ–¥ 1: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
curl https://kanban.24task.ru/api/health
# –û–∂–∏–¥–∞–µ—Ç—Å—è: {"status":"ok","timestamp":"..."}

# –ú–µ—Ç–æ–¥ 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
cd /var/www/taskmanager
./verify-deployment.sh
```

---

## üéì –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å

### –ü–æ–Ω–∏–º–∞–Ω–∏–µ Nginx proxy_pass

#### –ü—Ä–∞–≤–∏–ª–æ 1: –ë–ï–ó URI
```nginx
location /api/ {
    proxy_pass http://backend;  # ‚Üê –ù–µ—Ç –ø—É—Ç–∏ –ø–æ—Å–ª–µ —Ö–æ—Å—Ç–∞
}
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –í–µ—Å—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URI –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å.

#### –ü—Ä–∞–≤–∏–ª–æ 2: –° URI
```nginx
location /api/ {
    proxy_pass http://backend/v1/;  # ‚Üê –ï—Å—Ç—å –ø—É—Ç—å /v1/
}
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –°–æ–≤–ø–∞–≤—à–∞—è —á–∞—Å—Ç—å `/api/` –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `/v1/`.

#### –í–∞–∂–Ω–æ—Å—Ç—å trailing slashes

| Location | Proxy Pass | –ó–∞–ø—Ä–æ—Å | –†–µ–∑—É–ª—å—Ç–∞—Ç | –°—Ç–∞—Ç—É—Å |
|----------|-----------|--------|-----------|--------|
| `/api/` | `http://backend` | `/api/auth` | `/api/auth` | ‚úÖ |
| `/api/` | `http://backend/` | `/api/auth` | `/auth` | ‚ùå |
| `/api/` | `http://backend/api/` | `/api/auth` | `/api/auth` | ‚úÖ |
| `/api` | `http://backend` | `/api/auth` | `/api/auth` | ‚ö†Ô∏è |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### CodeQL –ê–Ω–∞–ª–∏–∑
‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–π–¥–µ–Ω –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
Analysis Result for 'javascript'. Found 0 alerts:
- javascript: No alerts found.
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ª–æ–≥–∏–∫–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π health check endpoint
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –§–∞–π–ª—ã
```
4 files changed, 996 insertions(+), 4 deletions(-)

src/server/index.ts           |   8 +-
PRODUCTION_DEPLOYMENT.md      |   6 +-
NGINX_FIX_GUIDE_RU.md         | 501 +++++++++++++++++++
QUICK_NGINX_FIX.md            | 224 +++++++++
verify-deployment.sh          | 261 ++++++++++
```

### –ö–æ–º–º–∏—Ç—ã
```
847cecb Add quick Nginx fix reference guide
5966f32 Add /api/health endpoint and Nginx configuration fix guide
402cd10 Initial plan
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- [x] –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω–æ
- [x] –î–æ–±–∞–≤–ª–µ–Ω `/api/health` endpoint
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ü—Ä–æ–π–¥–µ–Ω CodeQL –∞–Ω–∞–ª–∏–∑
- [x] –°–æ–∑–¥–∞–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [x] –ö–æ–º–º–∏—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ PR

### –î–ª—è DevOps
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

---

## üìö –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞–∑–º–µ—Ä |
|------|-----------|--------|
| `NGINX_FIX_GUIDE_RU.md` | –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ | 501 —Å—Ç—Ä–æ–∫–∞ |
| `QUICK_NGINX_FIX.md` | –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ | 224 —Å—Ç—Ä–æ–∫–∏ |
| `verify-deployment.sh` | –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ | 261 —Å—Ç—Ä–æ–∫–∞ |
| `PRODUCTION_DEPLOYMENT.md` | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ | –û–±–Ω–æ–≤–ª–µ–Ω–æ |

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```
POST https://kanban.24task.ru/api/auth/signin
  ‚Üì
Nginx –ø–æ–ª—É—á–∞–µ—Ç: /api/auth/signin
  ‚Üì
Backend –ø–æ–ª—É—á–∞–µ—Ç: /auth/signin ‚ùå
  ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: 404 Cannot POST /auth/signin
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```
POST https://kanban.24task.ru/api/auth/signin
  ‚Üì
Nginx –ø–æ–ª—É—á–∞–µ—Ç: /api/auth/signin
  ‚Üì
Backend –ø–æ–ª—É—á–∞–µ—Ç: /api/auth/signin ‚úÖ
  ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: 200 OK (–∏–ª–∏ 400/401 –¥–ª—è –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
```

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   pm2 logs taskmanager-api --lines 100
   sudo tail -f /var/log/nginx/taskmanager_error.log
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:**
   ```bash
   ./verify-deployment.sh
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - `NGINX_FIX_GUIDE_RU.md` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
   - `QUICK_NGINX_FIX.md` - –±—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è

4. **–ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   ```bash
   # Backend —Ä–∞–±–æ—Ç–∞–µ—Ç?
   curl http://localhost:3001/api/health
   
   # Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç?
   sudo systemctl status nginx
   
   # PM2 —Ä–∞–±–æ—Ç–∞–µ—Ç?
   pm2 status
   ```

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 10 –Ω–æ—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
