# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ DnD

## üéØ –ü—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∏ "Not authenticated" –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
‚ùå tasksAPI.getAll: No auth token available
‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á: Error: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
‚ùå projectsAPI.getAll: No auth token available
‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤: Error: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
Failed to fetch invitations: Error: Not authenticated
```

**–ü—Ä–∏—á–∏–Ω–∞:** `AppProvider` –ø—ã—Ç–∞–ª—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `getAuthToken()` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º API –≤—ã–∑–æ–≤–æ–º –≤ `app-context.tsx`:
  - `fetchTasks()`
  - `fetchProjects()`
  - `fetchCurrentUser()`
  - `fetchTeamMembers()`
  - `fetchCustomColumns()`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `header.tsx` –¥–ª—è `fetchInvitations()`
- –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç - —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–∫–∏ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ `client.tsx` - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ –∫–æ–Ω—Å–æ–ª–∏

### 2. –û—à–∏–±–∫–∞ "Cannot have two HTML5 backends at the same time"
```
Error: Cannot have two HTML5 backends at the same time.
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ hot-reload –∏–ª–∏ –≤ React StrictMode DndProvider –º–æ–≥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–≤–∞–∂–¥—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `key="dnd-provider"` –∫ `DndProvider` –≤ `App.tsx` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ HTML5Backend –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –æ—à–∏–±–æ–∫ –≤ `App.tsx`:
  ```typescript
  message.includes('HTML5 backend') ||
  message.includes('HTML5Backend') ||
  errorStack.includes('HTML5Backend') ||
  errorStr.includes('HTML5 backend')
  ```

### 3. –û—à–∏–±–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ Postgres —Ç–∞–±–ª–∏—Ü
```
Error deleting task from Postgres: Could not find the table 'public.tasks_d9879966'
Error deleting project from Postgres: Could not find the table 'public.projects_d9879966'
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Postgres —Ç–∞–±–ª–∏—Ü –¥–ª—è "realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏".

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª–µ–Ω –∫–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ Postgres –≤ `/supabase/functions/server/index.tsx`:
  - –£–¥–∞–ª–µ–Ω –∫–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏–∑ `tasks_d9879966` (—Å—Ç—Ä–æ–∫–∏ 815-831)
  - –£–¥–∞–ª–µ–Ω –∫–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ `projects_d9879966` –∏ `tasks_d9879966` (—Å—Ç—Ä–æ–∫–∏ 1187-1215)
- –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ KV store –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

### 4. –õ–∏—à–Ω–∏–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –≤—Ö–æ–¥–∞
```
SignIn error: AuthApiError: Invalid login credentials
Login error: Error: –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∏ –≤—Ö–æ–¥–∞ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º–∏ –∫—Ä–µ–¥–µ–Ω—à–∞–ª–∞–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å –∫–∞–∫ –æ—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±—Ä–∞–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ `client.tsx` –∏ `auth-screen.tsx`
- –û—à–∏–±–∫–∏ –≤—Å–µ –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ toast, –Ω–æ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –Ω–µ–∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. ‚úÖ –ù–µ—Ç –æ—à–∏–±–∫–∏ –¥–≤–æ–π–Ω–æ–≥–æ DnD –±—ç–∫–µ–Ω–¥–∞
3. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Postgres —Ç–∞–±–ª–∏—Ü
4. ‚úÖ –ß–∏—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫
5. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`/contexts/app-context.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ API –≤—ã–∑–æ–≤–∞–º–∏
   - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `getAuthToken`
   - –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

2. **`/components/header.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ `fetchInvitations()`
   - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `getAuthToken`

3. **`/utils/supabase/client.tsx`**
   - –£–±—Ä–∞–Ω—ã –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏–∑ `tasksAPI.getAll()`
   - –£–±—Ä–∞–Ω—ã –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏–∑ `projectsAPI.getAll()`
   - –£–±—Ä–∞–Ω—ã –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏–∑ `authAPI.signIn()`

4. **`/components/auth-screen.tsx`**
   - –£–±—Ä–∞–Ω –ª–æ–≥ –æ—à–∏–±–∫–∏ –≤—Ö–æ–¥–∞

5. **`/supabase/functions/server/index.tsx`**
   - –£–¥–∞–ª–µ–Ω –∫–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏–∑ Postgres —Ç–∞–±–ª–∏—Ü—ã
   - –£–¥–∞–ª–µ–Ω –∫–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ Postgres —Ç–∞–±–ª–∏—Ü

6. **`/App.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω `key="dnd-provider"` –∫ DndProvider
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ HTML5Backend –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
   - ‚úÖ –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ –±–µ–∑ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –í–æ–π–¥–∏—Ç–µ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º–∏ –∫—Ä–µ–¥–µ–Ω—à–∞–ª–∞–º–∏
   - ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è toast –æ—à–∏–±–∫–∞, –Ω–æ –±–µ–∑ –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏
3. –í–æ–π–¥–∏—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫—Ä–µ–¥–µ–Ω—à–∞–ª–∞–º–∏
   - ‚úÖ –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
4. Drag & Drop –∑–∞–¥–∞—á –Ω–∞ Kanban –¥–æ—Å–∫–∞—Ö
   - ‚úÖ –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ –¥–≤–æ–π–Ω–æ–≥–æ –±—ç–∫–µ–Ω–¥–∞
5. –£–¥–∞–ª–∏—Ç–µ –∑–∞–¥–∞—á—É –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç
   - ‚úÖ –î–æ–ª–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ Postgres

## üîç –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ KV store
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ KV store (`kv_store_d9879966`) –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö. 
Postgres —Ç–∞–±–ª–∏—Ü—ã `tasks_d9879966` –∏ `projects_d9879966` –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –ù–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç.

### Polling –≤–º–µ—Å—Ç–æ Realtime
–î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è polling (–æ–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã), –∞ –Ω–µ Supabase Realtime, 
—Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ KV store, –∞ –Ω–µ –≤ Postgres —Ç–∞–±–ª–∏—Ü–∞—Ö.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º API. 
–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç - —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–∫–∏, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –Ω–µ–∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
